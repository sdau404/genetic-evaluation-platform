<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é—ä¼ è¯„ä¼°ç»“æœå‘å¸ƒå¹³å¹³å°</title>
  <style>
    /* å…¨å±€æ ·å¼ */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f9f9f9;
      color: #333;
      background-image: linear-gradient(120deg, #fdfbfb 0%, #ebedee 100%);
      min-height: 100vh;
    }

    /* å¤´éƒ¨æ ·å¼ */
    header {
      background-color: #2c3e50;
      color: white;
      text-align: center;
      padding: 20px 0;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      width: 100%;
    }

    header h1 {
      margin: 0;
      font-size: 28px;
      font-weight: 600;
    }

    /* å¯¼èˆªæ æ ·å¼ */
    nav {
      background-color: #34495e;
      padding: 10px 0;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      width: 100%;
      text-align: center;
      position: relative;
    }

    nav a {
      margin: 0 10px;
      padding: 10px 20px;
      background-color: #3498db;
      color: white;
      text-decoration: none;
      border-radius: 5px;
      transition: background-color 0.3s ease, transform 0.2s ease;
      font-size: 14px;
      cursor: pointer;
    }

    nav a:hover {
      background-color: #2980b9;
      transform: translateY(-2px);
    }

    /* å³ä¸Šè§’æŒ‰é’® */
    .view-results-btn {
      position: absolute;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      padding: 10px 20px;
      background-color: #27ae60;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
      font-size: 14px;
    }

    .view-results-btn:hover {
      background-color: #219653;
      transform: translateY(-2px);
    }

    /* æœç´¢æ¡†æ ·å¼ */
    .search-box {
      display: none;
      position: absolute;
      right: 20px;
      top: 60px;
      background-color: white;
      padding: 15px;
      border-radius: 5px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      z-index: 10;
    }

    .search-box input {
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 14px;
      width: 200px;
      margin-right: 10px;
    }

    .search-box button {
      padding: 8px 12px;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .search-box button:hover {
      background-color: #2980b9;
    }

    /* ä¸»å†…å®¹åŒºæ ·å¼ */
    main {
      width: 80%;
      margin: 40px auto;
      padding: 40px;
      background-color: white;
      border-radius: 15px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
    }

    main h2 {
      font-size: 24px;
      color: #2c3e50;
      margin-bottom: 30px;
      text-align: center;
    }

    .publish-section {
      max-width: 600px;
      margin: 0 auto;
    }

    .publish-form {
      display: flex;
      flex-direction: column;
      gap: 20px;
      background-color: #ffffff;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .publish-form:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
    }

    .publish-form input,
    .publish-form textarea,
    .publish-form select {
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 14px;
      transition: border-color 0.3s ease;
    }

    .publish-form input:focus,
    .publish-form textarea:focus,
    .publish-form select:focus {
      border-color: #3498db;
      outline: none;
    }

    .publish-form textarea {
      resize: vertical;
      min-height: 150px;
    }

    .publish-form button {
      padding: 12px 20px;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
    }

    .publish-form button:hover {
      background-color: #2980b9;
      transform: translateY(-2px);
    }

    /* åº•éƒ¨æ ·å¼ */
    footer {
      background-color: #2c3e50;
      color: white;
      padding: 20px;
      text-align: center;
      margin-top: 40px;
      box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);
    }

    .footer-buttons {
      margin-bottom: 10px;
    }

    .footer-buttons button {
      margin: 0 5px;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      background-color: #3498db;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
      font-size: 14px;
    }

    .footer-buttons button:hover {
      background-color: #2980b9;
      transform: translateY(-2px);
    }

    footer p {
      font-size: 12px;
      margin: 5px 0 0;
    }

    /* æ¨¡æ€æ¡†æ ·å¼ */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 100;
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background-color: white;
      padding: 30px;
      border-radius: 10px;
      width: 70%;
      max-width: 800px;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      position: relative;
    }

    .close-btn {
      position: absolute;
      top: 15px;
      right: 15px;
      font-size: 24px;
      cursor: pointer;
      color: #777;
    }

    .close-btn:hover {
      color: #333;
    }

    /* è¡¨å•ç»„æ ·å¼ */
    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #2c3e50;
    }

    .form-row {
      display: flex;
      gap: 20px;
      margin-bottom: 15px;
    }

    .form-col {
      flex: 1;
    }

    /* æ–‡ä»¶ä¸Šä¼ æ ·å¼ */
    .file-upload {
      border: 2px dashed #ddd;
      padding: 20px;
      text-align: center;
      border-radius: 5px;
      cursor: pointer;
      transition: border-color 0.3s ease;
    }

    .file-upload:hover {
      border-color: #3498db;
    }

    .file-upload input {
      display: none;
    }

    /* è¡¨æ ¼æ ·å¼ */
    .data-table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }

    .data-table th, .data-table td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: left;
    }

    .data-table th {
      background-color: #f2f2f2;
    }

    /* é€‰é¡¹å¡æ ·å¼ */
    .tab-container {
      margin-bottom: 20px;
    }

    .tab-buttons {
      display: flex;
      border-bottom: 1px solid #ddd;
      margin-bottom: 20px;
    }

    .tab-btn {
      padding: 10px 20px;
      background: none;
      border: none;
      cursor: pointer;
      border-bottom: 3px solid transparent;
      transition: all 0.3s ease;
    }

    .tab-btn.active {
      border-bottom: 3px solid #3498db;
      color: #3498db;
      font-weight: 600;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* å“åº”å¼è®¾è®¡ */
    @media (max-width: 768px) {
      main {
        width: 90%;
        padding: 20px;
      }
      
      .modal-content {
        width: 90%;
      }
      
      .form-row {
        flex-direction: column;
        gap: 10px;
      }
    }
  </style>
</head>

<body>
  <header>
    <h1>é—ä¼ æ”¹è‰¯ä¿¡æ¯æœåŠ¡å¹³å°</h1>
  </header>
  <nav>
    <a onclick="openModal('phenotypeModal')">è¡¨å‹æ•°æ®å¤„ç†</a>
    <a onclick="openModal('genotypeModal')">åŸºå› å‹æ•°æ®å¤„ç†</a>
    <a onclick="openKinshipModal()">äº²ç¼˜å…³ç³»çŸ©é˜µè®¡ç®—</a>
    <a onclick="openModal('gwasModal')">å…¨åŸºå› ç»„å…³è”åˆ†æ</a>
    <a href="#">é—ä¼ è¯„ä¼°</a>
    <a href="#">å·¥å…·</a>
    <a href="#">å¸®åŠ©</a>
    <button class="view-results-btn" onclick="toggleSearchBox()">é—ä¼ è¯„ä¼°ç»“æœæŸ¥çœ‹</button>
    <div class="search-box" id="searchBox">
      <input type="text" placeholder="è¾“å…¥å…³é”®è¯æœç´¢">
      <button onclick="searchResults()">æœç´¢</button>
    </div>
  </nav>
  <main>
    <h2>é—ä¼ è¯„ä¼°ç»“æœå‘å¸ƒ</h2>
    <div class="publish-section">
      <form class="publish-form">
        <input type="text" placeholder="è¾“å…¥è¯„ä¼°æ ‡é¢˜" required>
        <textarea placeholder="è¾“å…¥è¯„ä¼°å†…å®¹..." required></textarea>
        <button type="submit">å‘å¸ƒç»“æœ</button>
      </form>
    </div>
  </main>
  <footer>
    <div class="footer-buttons">
      <button>Update</button>
      <button>Citation</button>
      <button>Manual</button>
    </div>
    <p>å¦‚æœå‘ç°bugï¼Œè¯·è”ç³»æˆ‘ä»¬ã€‚é‚®ç®±ä¸ºningchao@sdau.edu.cn</p>
  </footer>

  <!-- è¡¨å‹æ•°æ®å¤„ç†æ¨¡æ€æ¡† -->
  <div class="modal" id="phenotypeModal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal('phenotypeModal')">&times;</span>
      <h2>è¡¨å‹æ•°æ®å¤„ç†</h2>
      
      <div class="tab-container">
        <div class="tab-buttons">
          <button class="tab-btn active" onclick="openTab(event, 'phenotype-upload')">æ•°æ®ä¸Šä¼ </button>
          <button class="tab-btn" onclick="openTab(event, 'phenotype-process')">æ•°æ®å¤„ç†</button>
          <button class="tab-btn" onclick="openTab(event, 'phenotype-view')">æ•°æ®æŸ¥çœ‹</button>
        </div>
        
        <div id="phenotype-upload" class="tab-content active">
          <form class="publish-form">
            <div class="form-group">
              <label for="phenotype-file">ä¸Šä¼ è¡¨å‹æ•°æ®æ–‡ä»¶</label>
              <div class="file-upload" onclick="document.getElementById('phenotype-file').click()">
                <input type="file" id="phenotype-file" accept=".csv, .xlsx, .txt">
                <p>ç‚¹å‡»æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>
                <p>æ”¯æŒæ ¼å¼: CSV, Excel, TXT</p>
              </div>
            </div>
            
            <div class="form-group">
              <label for="phenotype-name">æ•°æ®é›†åç§°</label>
              <input type="text" id="phenotype-name" placeholder="è¾“å…¥æ•°æ®é›†åç§°" required>
            </div>
            
            <div class="form-group">
              <label for="phenotype-description">æ•°æ®é›†æè¿°</label>
              <textarea id="phenotype-description" placeholder="è¾“å…¥æ•°æ®é›†æè¿°"></textarea>
            </div>
            
            <div class="form-row">
              <div class="form-col">
                <label for="phenotype-species">ç‰©ç§</label>
                <select id="phenotype-species" required>
                  <option value="">é€‰æ‹©ç‰©ç§</option>
                  <option value="cattle">ç‰›</option>
                  <option value="pig">çŒª</option>
                  <option value="sheep">ç¾Š</option>
                  <option value="chicken">é¸¡</option>
                </select>
              </div>
              
              <div class="form-col">
                <label for="phenotype-trait">æ€§çŠ¶ç±»å‹</label>
                <select id="phenotype-trait" required>
                  <option value="">é€‰æ‹©æ€§çŠ¶ç±»å‹</option>
                  <option value="growth">ç”Ÿé•¿æ€§çŠ¶</option>
                  <option value="reproduction">ç¹æ®–æ€§çŠ¶</option>
                  <option value="milk">äº§å¥¶æ€§çŠ¶</option>
                  <option value="meat">è‚‰è´¨æ€§çŠ¶</option>
                </select>
              </div>
            </div>
            
            <button type="submit">ä¸Šä¼ æ•°æ®</button>
          </form>
        </div>
        
        <div id="phenotype-process" class="tab-content">
          <form class="publish-form">
            <div class="form-group">
              <label for="phenotype-dataset">é€‰æ‹©æ•°æ®é›†</label>
              <select id="phenotype-dataset" required>
                <option value="">é€‰æ‹©è¦å¤„ç†çš„æ•°æ®é›†</option>
                <option value="dataset1">ç‰›ç”Ÿé•¿æ€§çŠ¶æ•°æ®é›† 2023</option>
                <option value="dataset2">çŒªç¹æ®–æ€§çŠ¶æ•°æ®é›† 2022</option>
                <option value="dataset3">ç¾Šäº§å¥¶æ€§çŠ¶æ•°æ®é›† 2021</option>
              </select>
            </div>
            
            <div class="form-group">
              <label>æ•°æ®å¤„ç†é€‰é¡¹</label>
              <div style="display: flex; flex-direction: column; gap: 10px;">
                <label><input type="checkbox" name="phenotype-options" value="missing"> ç¼ºå¤±å€¼å¤„ç†</label>
                <label><input type="checkbox" name="phenotype-options" value="outlier"> å¼‚å¸¸å€¼æ£€æµ‹</label>
                <label><input type="checkbox" name="phenotype-options" value="normalize"> æ•°æ®æ ‡å‡†åŒ–</label>
                <label><input type="checkbox" name="phenotype-options" value="transform"> æ•°æ®è½¬æ¢</label>
              </div>
            </div>
            
            <div class="form-group">
              <label for="phenotype-method">ç¼ºå¤±å€¼å¤„ç†æ–¹æ³•</label>
              <select id="phenotype-method">
                <option value="mean">å‡å€¼å¡«å……</option>
                <option value="median">ä¸­ä½æ•°å¡«å……</option>
                <option value="delete">åˆ é™¤ç¼ºå¤±è¡Œ</option>
                <option value="regression">å›å½’å¡«å……</option>
              </select>
            </div>
            
            <button type="submit">å¤„ç†æ•°æ®</button>
          </form>
        </div>
        
        <div id="phenotype-view" class="tab-content">
          <div class="form-group">
            <label for="phenotype-view-dataset">é€‰æ‹©æ•°æ®é›†</label>
            <select id="phenotype-view-dataset" onchange="loadPhenotypeData()">
              <option value="">é€‰æ‹©è¦æŸ¥çœ‹çš„æ•°æ®é›†</option>
              <option value="dataset1">ç‰›ç”Ÿé•¿æ€§çŠ¶æ•°æ®é›† 2023</option>
              <option value="dataset2">çŒªç¹æ®–æ€§çŠ¶æ•°æ®é›† 2022</option>
              <option value="dataset3">ç¾Šäº§å¥¶æ€§çŠ¶æ•°æ®é›† 2021</option>
            </select>
          </div>
          
          <div class="form-group">
            <div style="overflow-x: auto;">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>ä¸ªä½“ID</th>
                    <th>æ€§çŠ¶1</th>
                    <th>æ€§çŠ¶2</th>
                    <th>æ€§çŠ¶3</th>
                    <th>æ€§çŠ¶4</th>
                    <th>æ€§çŠ¶5</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>ID001</td>
                    <td>23.5</td>
                    <td>45.2</td>
                    <td>12.8</td>
                    <td>67.3</td>
                    <td>89.1</td>
                  </tr>
                  <tr>
                    <td>ID002</td>
                    <td>25.1</td>
                    <td>43.7</td>
                    <td>13.2</td>
                    <td>65.8</td>
                    <td>87.6</td>
                  </tr>
                  <tr>
                    <td>ID003</td>
                    <td>22.9</td>
                    <td>46.5</td>
                    <td>11.9</td>
                    <td>68.4</td>
                    <td>90.2</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          
          <button onclick="exportPhenotypeData()">å¯¼å‡ºæ•°æ®</button>
        </div>
      </div>
    </div>
  </div>

  <!-- åŸºå› å‹æ•°æ®å¤„ç†æ¨¡æ€æ¡† -->
  <div class="modal" id="genotypeModal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal('genotypeModal')">&times;</span>
      <h2>åŸºå› å‹æ•°æ®å¤„ç†</h2>
      
      <div class="tab-container">
        <div class="tab-buttons">
          <button class="tab-btn active" onclick="openTab(event, 'genotype-upload')">æ•°æ®ä¸Šä¼ </button>
          <button class="tab-btn" onclick="openTab(event, 'genotype-process')">è´¨é‡æ§åˆ¶</button>
          <button class="tab-btn" onclick="openTab(event, 'genotype-view')">æ•°æ®æŸ¥çœ‹</button>
        </div>
        
        <div id="genotype-upload" class="tab-content active">
          <form class="publish-form">
            <div class="form-group">
              <label for="genotype-file">ä¸Šä¼ åŸºå› å‹æ•°æ®æ–‡ä»¶</label>
              <div class="file-upload" onclick="document.getElementById('genotype-file').click()">
                <input type="file" id="genotype-file" accept=".vcf, .ped, .map, .bed">
                <p>ç‚¹å‡»æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>
                <p>æ”¯æŒæ ¼å¼: VCF, PED/MAP, BED/BIM/FAM</p>
              </div>
            </div>
            
            <div class="form-group">
              <label for="genotype-name">æ•°æ®é›†åç§°</label>
              <input type="text" id="genotype-name" placeholder="è¾“å…¥æ•°æ®é›†åç§°" required>
            </div>
            
            <div class="form-group">
              <label for="genotype-platform">åŸºå› åˆ†å‹å¹³å°</label>
              <select id="genotype-platform" required>
                <option value="">é€‰æ‹©å¹³å°</option>
                <option value="illumina">Illumina</option>
                <option value="affymetrix">Affymetrix</option>
                <option value="custom">è‡ªå®šä¹‰</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="genotype-species">ç‰©ç§</label>
              <select id="genotype-species" required>
                <option value="">é€‰æ‹©ç‰©ç§</option>
                <option value="cattle">ç‰›</option>
                <option value="pig">çŒª</option>
                <option value="sheep">ç¾Š</option>
                <option value="chicken">é¸¡</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="genotype-description">æ•°æ®é›†æè¿°</label>
              <textarea id="genotype-description" placeholder="è¾“å…¥æ•°æ®é›†æè¿°"></textarea>
            </div>
            
            <button type="submit">ä¸Šä¼ æ•°æ®</button>
          </form>
        </div>
        
        <div id="genotype-process" class="tab-content">
          <form class="publish-form">
            <div class="form-group">
              <label for="genotype-dataset">é€‰æ‹©æ•°æ®é›†</label>
              <select id="genotype-dataset" required>
                <option value="">é€‰æ‹©è¦å¤„ç†çš„æ•°æ®é›†</option>
                <option value="dataset1">ç‰›å…¨åŸºå› ç»„SNPæ•°æ®</option>
                <option value="dataset2">çŒªèŠ¯ç‰‡æ•°æ® 50K</option>
                <option value="dataset3">ç¾Šé‡æµ‹åºæ•°æ®</option>
              </select>
            </div>
            
            <div class="form-group">
              <label>è´¨é‡æ§åˆ¶å‚æ•°</label>
              <div class="form-row">
                <div class="form-col">
                  <label for="genotype-missing">ä¸ªä½“ç¼ºå¤±ç‡é˜ˆå€¼ (%)</label>
                  <input type="number" id="genotype-missing" min="0" max="100" value="10" step="1">
                </div>
                <div class="form-col">
                  <label for="snp-missing">SNPç¼ºå¤±ç‡é˜ˆå€¼ (%)</label>
                  <input type="number" id="snp-missing" min="0" max="100" value="5" step="1">
                </div>
              </div>
              
              <div class="form-row">
                <div class="form-col">
                  <label for="maf">æœ€å°ç­‰ä½åŸºå› é¢‘ç‡ (MAF)</label>
                  <input type="number" id="maf" min="0" max="0.5" value="0.01" step="0.01">
                </div>
                <div class="form-col">
                  <label for="hwe">HWEæ£€éªŒPå€¼</label>
                  <input type="number" id="hwe" min="0" max="1" value="0.0001" step="0.0001">
                </div>
              </div>
            </div>
            
            <div class="form-group">
              <label>å…¶ä»–é€‰é¡¹</label>
              <div style="display: flex; flex-direction: column; gap: 10px;">
                <label><input type="checkbox" name="genotype-options" value="prune"> LDä¿®å‰ª</label>
                <label><input type="checkbox" name="genotype-options" value="impute"> åŸºå› å‹å¡«å……</label>
                <label><input type="checkbox" name="genotype-options" value="pca"> ä¸»æˆåˆ†åˆ†æ</label>
              </div>
            </div>
            
            <button type="submit">æ‰§è¡Œè´¨é‡æ§åˆ¶</button>
          </form>
        </div>
        
        <div id="genotype-view" class="tab-content">
          <div class="form-group">
            <label for="genotype-view-dataset">é€‰æ‹©æ•°æ®é›†</label>
            <select id="genotype-view-dataset" onchange="loadGenotypeData()">
              <option value="">é€‰æ‹©è¦æŸ¥çœ‹çš„æ•°æ®é›†</option>
              <option value="dataset1">ç‰›å…¨åŸºå› ç»„SNPæ•°æ®</option>
              <option value="dataset2">çŒªèŠ¯ç‰‡æ•°æ® 50K</option>
              <option value="dataset3">ç¾Šé‡æµ‹åºæ•°æ®</option>
            </select>
          </div>
          
          <div class="form-group">
            <div style="overflow-x: auto;">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>æ ·æœ¬ID</th>
                    <th>SNP001</th>
                    <th>SNP002</th>
                    <th>SNP003</th>
                    <th>SNP004</th>
                    <th>SNP005</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Sample1</td>
                    <td>AA</td>
                    <td>GG</td>
                    <td>CC</td>
                    <td>TT</td>
                    <td>AG</td>
                  </tr>
                  <tr>
                    <td>Sample2</td>
                    <td>AG</td>
                    <td>GA</td>
                    <td>CT</td>
                    <td>TC</td>
                    <td>AA</td>
                  </tr>
                  <tr>
                    <td>Sample3</td>
                    <td>GG</td>
                    <td>AA</td>
                    <td>TT</td>
                    <td>CC</td>
                    <td>GG</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          
          <button onclick="exportGenotypeData()">å¯¼å‡ºæ•°æ®</button>
        </div>
      </div>
    </div>
  </div>
<!-- äº²ç¼˜å…³ç³»çŸ©é˜µè®¡ç®—æ¨¡æ€æ¡†ï¼ˆéœ€æ–°å¢ï¼‰ -->
  <div class="modal" id="kinshipMatrixModal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal('kinshipMatrixModal')">&times;</span>
      <h2>äº²ç¼˜å…³ç³»çŸ©é˜µè®¡ç®—</h2>

      <div class="tab-container">
        <div class="tab-buttons">
          <button class="tab-btn active" onclick="openTab(event, 'kinship-data')">æ•°æ®é€‰æ‹©</button>
          <button class="tab-btn" onclick="openTab(event, 'kinship-params')">å‚æ•°é…ç½®</button>
          <button class="tab-btn" onclick="openTab(event, 'kinship-result')">ç»“æœæŸ¥çœ‹</button>
        </div>

        <!-- æ•°æ®é€‰æ‹©é€‰é¡¹å¡ -->
        <div id="kinship-data" class="tab-content active">
          <form class="publish-form">
            <div class="form-group">
              <label>é€‰æ‹©åŸºå› å‹æ•°æ®é›†ï¼ˆäº²ç¼˜å…³ç³»çŸ©é˜µè®¡ç®—ä¾èµ–åŸºå› å‹æ•°æ®ï¼‰</label>
              <select id="kinship-genotype-dataset" required>
                <option value="">é€‰æ‹©å·²ä¸Šä¼ çš„åŸºå› å‹æ•°æ®é›†</option>
                <option value="dataset1">ç‰›å…¨åŸºå› ç»„SNPæ•°æ®</option>
                <option value="dataset2">çŒªèŠ¯ç‰‡æ•°æ® 50K</option>
              </select>
            </div>
            <button type="button" onclick="openTab(event, 'kinship-params')">ä¸‹ä¸€æ­¥</button>
          </form>
        </div>

        <!-- å‚æ•°é…ç½®é€‰é¡¹å¡ -->
        <div id="kinship-params" class="tab-content">
          <form class="publish-form">
            <div class="form-group">
              <label>è®¡ç®—æ–¹æ³•</label>
              <select id="kinship-method">
                <option value="vanraden">VanRadenæ–¹æ³•ï¼ˆå¸¸ç”¨ï¼‰</option>
                <option value="grm">GCTA-GRMæ–¹æ³•</option>
                <option value="identity-by-descent">IBD-basedæ–¹æ³•</option>
              </select>
            </div>
            <div class="form-group">
              <label>è¿‡æ»¤å‚æ•°ï¼ˆSNPè´¨é‡æ§åˆ¶ï¼‰</label>
              <input type="number" id="kinship-maf" placeholder="æœ€å°ç­‰ä½åŸºå› é¢‘ç‡ï¼ˆå¦‚0.01ï¼‰" value="0.01">
            </div>
            <button type="button" onclick="calculateKinshipMatrix()">å¼€å§‹è®¡ç®—</button>
          </form>
        </div>

        <!-- ç»“æœæŸ¥çœ‹é€‰é¡¹å¡ -->
        <div id="kinship-result" class="tab-content">
          <div class="form-group">
            <label>äº²ç¼˜å…³ç³»çŸ©é˜µç»“æœ</label>
            <div style="overflow-x: auto;">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>æ ·æœ¬ID</th>
                    <th>Sample1</th>
                    <th>Sample2</th>
                    <th>Sample3</th>
                  </tr>
                </thead>
                <tbody id="kinship-result-table">
                  <!-- è®¡ç®—ç»“æœå°†é€šè¿‡JSåŠ¨æ€å¡«å…… -->
                </tbody>
              </table>
            </div>
          </div>
          <button onclick="exportKinshipMatrix()">å¯¼å‡ºçŸ©é˜µ</button>
        </div>
      </div>
    </div>
  </div>
  <!-- GWASå…¨åŸºå› ç»„å…³è”åˆ†ææ¨¡æ€æ¡† -->
<div class="modal" id="gwasModal">
  <div class="modal-content">
    <span class="close-btn" onclick="closeModal('gwasModal')">&times;</span>
    <h2>å…¨åŸºå› ç»„å…³è”åˆ†æï¼ˆGWASï¼‰</h2>

    <div class="tab-container">
      <div class="tab-buttons">
        <button class="tab-btn active" onclick="openTab(event, 'gwas-data')">æ•°æ®é€‰æ‹©</button>
        <button class="tab-btn" onclick="openTab(event, 'gwas-params')">å‚æ•°é…ç½®</button>
        <button class="tab-btn" onclick="openTab(event, 'gwas-result')">ç»“æœæŸ¥çœ‹</button>
      </div>

      <!-- 1. æ•°æ®é€‰æ‹©é€‰é¡¹å¡ -->
      <div id="gwas-data" class="tab-content active">
        <form class="publish-form">
          <div class="form-group">
            <label for="gwas-phenotype">é€‰æ‹©è¡¨å‹æ•°æ®é›†</label>
            <select id="gwas-phenotype" required>
              <option value="">é€‰æ‹©å·²å¤„ç†çš„è¡¨å‹æ•°æ®é›†</option>
              <option value="pheno-dataset1">ç‰›ç”Ÿé•¿æ€§çŠ¶æ•°æ®é›† 2023ï¼ˆå·²è´¨æ§ï¼‰</option>
              <option value="pheno-dataset2">çŒªç¹æ®–æ€§çŠ¶æ•°æ®é›† 2022ï¼ˆå·²æ ‡å‡†åŒ–ï¼‰</option>
            </select>
          </div>

          <div class="form-group">
            <label for="gwas-genotype">é€‰æ‹©åŸºå› å‹æ•°æ®é›†</label>
            <select id="gwas-genotype" required>
              <option value="">é€‰æ‹©å·²è´¨æ§çš„åŸºå› å‹æ•°æ®é›†</option>
              <option value="geno-dataset1">ç‰›å…¨åŸºå› ç»„SNPæ•°æ®ï¼ˆMAFâ‰¥0.01ï¼‰</option>
              <option value="geno-dataset2">çŒªèŠ¯ç‰‡æ•°æ® 50Kï¼ˆSNPç¼ºå¤±ç‡â‰¤5%ï¼‰</option>
            </select>
          </div>

          <div class="form-group">
            <label for="gwas-trait">é€‰æ‹©ç›®æ ‡æ€§çŠ¶ï¼ˆä»è¡¨å‹æ•°æ®ä¸­æå–ï¼‰</label>
            <select id="gwas-trait" required disabled>
              <option value="">è¯·å…ˆé€‰æ‹©è¡¨å‹æ•°æ®é›†</option>
              <!-- åç»­é€šè¿‡JSæ ¹æ®é€‰ä¸­çš„è¡¨å‹æ•°æ®é›†åŠ¨æ€åŠ è½½æ€§çŠ¶ -->
            </select>
          </div>

          <button type="button" onclick="gwasNextStep('gwas-params')">ä¸‹ä¸€æ­¥</button>
        </form>
      </div>

      <!-- 2. å‚æ•°é…ç½®é€‰é¡¹å¡ -->
      <div id="gwas-params" class="tab-content">
        <form class="publish-form">
          <div class="form-group">
            <label>å…³è”åˆ†ææ¨¡å‹</label>
            <select id="gwas-model" required>
              <option value="mlm">æ··åˆçº¿æ€§æ¨¡å‹ï¼ˆMLMï¼Œæ§åˆ¶ç¾¤ä½“åˆ†å±‚+äº²ç¼˜å…³ç³»ï¼‰</option>
              <option value="glm">å¹¿ä¹‰çº¿æ€§æ¨¡å‹ï¼ˆGLMï¼Œä»…æ§åˆ¶ç¾¤ä½“åˆ†å±‚ï¼‰</option>
              <option value="farmcpu">FarmCPUï¼ˆé«˜æ•ˆæ··åˆæ¨¡å‹ï¼Œå¹³è¡¡åŠŸç‡ä¸è®¡ç®—é€Ÿåº¦ï¼‰</option>
            </select>
          </div>

          <div class="form-group">
            <label>åå˜é‡è®¾ç½®</label>
            <div style="display: flex; flex-direction: column; gap: 10px;">
              <label><input type="checkbox" name="gwas-covariate" value="pca"> ä¸»æˆåˆ†ï¼ˆPCAï¼Œæ§åˆ¶ç¾¤ä½“åˆ†å±‚ï¼‰</label>
              <label><input type="checkbox" name="gwas-covariate" value="sex"> æ€§åˆ«</label>
              <label><input type="checkbox" name="gwas-covariate" value="age"> å¹´é¾„</label>
              <input type="text" placeholder="å…¶ä»–åå˜é‡ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰" style="margin-top: 5px;">
            </div>
          </div>

          <div class="form-row">
            <div class="form-col">
              <label for="gwas-pvalue">æ˜¾è‘—æ€§é˜ˆå€¼ï¼ˆPå€¼ï¼‰</label>
              <input type="number" id="gwas-pvalue" min="0" max="1" value="5e-8" step="1e-8" readonly>
              <small>å¸¸ç”¨é˜ˆå€¼ï¼š5e-8ï¼ˆå…¨åŸºå› ç»„æ˜¾è‘—ï¼‰ã€1e-5ï¼ˆå»ºè®®æ˜¾è‘—ï¼‰</small>
            </div>
            <div class="form-col">
              <label for="gwas-missing">SNPç¼ºå¤±ç‡è¿‡æ»¤ï¼ˆè¡¥å……è´¨æ§ï¼‰</label>
              <input type="number" id="gwas-missing" min="0" max="100" value="5" step="1">
            </div>
          </div>

          <button type="button" onclick="runGWAS()">è¿è¡ŒGWASåˆ†æ</button>
        </form>
      </div>

      <!-- 3. ç»“æœæŸ¥çœ‹é€‰é¡¹å¡ -->
      <div id="gwas-result" class="tab-content">
        <div class="form-group">
          <h3>GWASç»“æœå¯è§†åŒ–</h3>
          <div style="display: flex; gap: 20px; margin-bottom: 30px; flex-wrap: wrap;">
            <!-- æ›¼å“ˆé¡¿å›¾å®¹å™¨ -->
            <div style="flex: 1; min-width: 400px; height: 350px; border: 1px solid #ddd; border-radius: 5px; padding: 10px;">
              <h4>æ›¼å“ˆé¡¿å›¾ï¼ˆManhattan Plotï¼‰</h4>
              <div id="manhattan-plot" style="width: 100%; height: 300px;"></div>
            </div>
            <!-- QQå›¾å®¹å™¨ -->
            <div style="flex: 1; min-width: 400px; height: 350px; border: 1px solid #ddd; border-radius: 5px; padding: 10px;">
              <h4>QQå›¾ï¼ˆQuantile-Quantile Plotï¼‰</h4>
              <div id="qq-plot" style="width: 100%; height: 300px;"></div>
            </div>
          </div>
        </div>

        <div class="form-group">
          <h3>æ˜¾è‘—å…³è”SNPåˆ—è¡¨ï¼ˆP â‰¤ 5e-8ï¼‰</h3>
          <div style="overflow-x: auto;">
            <table class="data-table">
              <thead>
                <tr>
                  <th>SNP ID</th>
                  <th>æŸ“è‰²ä½“</th>
                  <th>ç‰©ç†ä½ç½®ï¼ˆbpï¼‰</th>
                  <th>ç­‰ä½åŸºå› ï¼ˆA1/A2ï¼‰</th>
                  <th>På€¼</th>
                  <th>-log10(P)</th>
                  <th>é‚»è¿‘åŸºå› </th>
                </tr>
              </thead>
              <tbody id="gwas-snp-table">
                <!-- åˆ†æç»“æœé€šè¿‡JSåŠ¨æ€å¡«å…… -->
              </tbody>
            </table>
          </div>
        </div>

        <div style="margin-top: 20px; display: flex; gap: 10px;">
          <button onclick="exportGWASResult('table')">å¯¼å‡ºSNPè¡¨æ ¼ï¼ˆCSVï¼‰</button>
          <button onclick="exportGWASResult('plot')">å¯¼å‡ºå›¾è¡¨ï¼ˆPNG/SVGï¼‰</button>
          <button onclick="exportGWASResult('full')">å¯¼å‡ºå®Œæ•´ç»“æœï¼ˆå«å‚æ•°+æ•°æ®ï¼‰</button>
        </div>
      </div>
    </div>
  </div>
</div>
  <script>
    // åˆ‡æ¢æœç´¢æ¡†æ˜¾ç¤ºçŠ¶æ€
    function toggleSearchBox() {
      const searchBox = document.getElementById('searchBox');
      searchBox.style.display = searchBox.style.display === 'block' ? 'none' : 'block';
    }

    // æœç´¢åŠŸèƒ½
    function searchResults() {
      const keyword = document.querySelector('.search-box input').value;
      if (keyword) {
        alert(`æœç´¢å…³é”®è¯: ${keyword}`);
        // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„æœç´¢é€»è¾‘
      } else {
        alert('è¯·è¾“å…¥æœç´¢å…³é”®è¯');
      }
    }

    // æ‰“å¼€æ¨¡æ€æ¡†
    function openModal(modalId) {
      document.getElementById(modalId).style.display = 'flex';
    }

    // å…³é—­æ¨¡æ€æ¡†
    function closeModal(modalId) {
      document.getElementById(modalId).style.display = 'none';
    }

    // åˆ‡æ¢é€‰é¡¹å¡
    function openTab(evt, tabId) {
      // è·å–æ‰€æœ‰é€‰é¡¹å¡å†…å®¹å’ŒæŒ‰é’®
      const tabContents = document.querySelectorAll('.tab-content');
      const tabButtons = document.querySelectorAll('.tab-btn');
      
      // éšè—æ‰€æœ‰é€‰é¡¹å¡å†…å®¹
      tabContents.forEach(content => {
        content.classList.remove('active');
      });
      
      // ç§»é™¤æ‰€æœ‰æŒ‰é’®çš„activeç±»
      tabButtons.forEach(button => {
        button.classList.remove('active');
      });
      
      // æ˜¾ç¤ºå½“å‰é€‰é¡¹å¡å†…å®¹å¹¶æ¿€æ´»æŒ‰é’®
      document.getElementById(tabId).classList.add('active');
      evt.currentTarget.classList.add('active');
    }

    // åŠ è½½è¡¨å‹æ•°æ®
    function loadPhenotypeData() {
      const dataset = document.getElementById('phenotype-view-dataset').value;
      if (dataset) {
        // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„æ•°æ®åŠ è½½é€»è¾‘
        console.log(`åŠ è½½è¡¨å‹æ•°æ®é›†: ${dataset}`);
      }
    }

    // å¯¼å‡ºè¡¨å‹æ•°æ®
    function exportPhenotypeData() {
      const dataset = document.getElementById('phenotype-view-dataset').value;
      if (dataset) {
        alert(`å¯¼å‡ºè¡¨å‹æ•°æ®é›†: ${dataset}`);
        // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„æ•°æ®å¯¼å‡ºé€»è¾‘
      } else {
        alert('è¯·å…ˆé€‰æ‹©æ•°æ®é›†');
      }
    }

    // åŠ è½½åŸºå› å‹æ•°æ®
    function loadGenotypeData() {
      const dataset = document.getElementById('genotype-view-dataset').value;
      if (dataset) {
        // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„æ•°æ®åŠ è½½é€»è¾‘
        console.log(`åŠ è½½åŸºå› å‹æ•°æ®é›†: ${dataset}`);
      }
    }

    // å¯¼å‡ºåŸºå› å‹æ•°æ®
    function exportGenotypeData() {
      const dataset = document.getElementById('genotype-view-dataset').value;
      if (dataset) {
        alert(`å¯¼å‡ºåŸºå› å‹æ•°æ®é›†: ${dataset}`);
        // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„æ•°æ®å¯¼å‡ºé€»è¾‘
      } else {
        alert('è¯·å…ˆé€‰æ‹©æ•°æ®é›†');
      }
    }

    // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­æ¨¡æ€æ¡†
    window.onclick = function(event) {
      if (event.target.className === 'modal') {
        event.target.style.display = 'none';
      }
    }
    // æ‰“å¼€äº²ç¼˜å…³ç³»çŸ©é˜µè®¡ç®—æ¨¡æ€æ¡†ï¼ˆéœ€æ–°å¢ï¼‰
    function openKinshipModal() {
    document.getElementById('kinshipMatrixModal').style.display = 'flex';
   }

    // è®¡ç®—äº²ç¼˜å…³ç³»çŸ©é˜µï¼ˆæ¨¡æ‹Ÿé€»è¾‘ï¼Œå®é™…éœ€å¯¹æ¥åå°ç®—æ³•ï¼‰
    function calculateKinshipMatrix() {
    const dataset = document.getElementById('kinship-genotype-dataset').value;
    const method = document.getElementById('kinship-method').value;

    if (!dataset) {
      alert('è¯·å…ˆé€‰æ‹©åŸºå› å‹æ•°æ®é›†');
      return;
    }

    // æ¨¡æ‹Ÿè®¡ç®—è¿‡ç¨‹ï¼ˆå®é™…éœ€è°ƒç”¨åå°ç®—æ³•ï¼ŒåŸºäºåŸºå› å‹æ•°æ®è®¡ç®—äº²ç¼˜å…³ç³»ï¼‰
    alert(`æ­£åœ¨ä½¿ç”¨${method}æ–¹æ³•è®¡ç®—æ•°æ®é›†${dataset}çš„äº²ç¼˜å…³ç³»çŸ©é˜µ...`);

    // æ¨¡æ‹Ÿå¡«å……ç»“æœè¡¨æ ¼
    const tableBody = document.getElementById('kinship-result-table');
    tableBody.innerHTML = `
      <tr><td>Sample1</td><td>1.000</td><td>0.482</td><td>0.051</td></tr>
      <tr><td>Sample2</td><td>0.482</td><td>1.000</td><td>0.043</td></tr>
      <tr><td>Sample3</td><td>0.051</td><td>0.043</td><td>1.000</td></tr>
    `;

    // åˆ‡æ¢åˆ°ç»“æœæŸ¥çœ‹é€‰é¡¹å¡
    openTab(event, 'kinship-result');
   }

   // å¯¼å‡ºäº²ç¼˜å…³ç³»çŸ©é˜µï¼ˆæ¨¡æ‹Ÿï¼‰
   function exportKinshipMatrix() {
     alert('æ­£åœ¨å¯¼å‡ºäº²ç¼˜å…³ç³»çŸ©é˜µï¼ˆæ”¯æŒCSV/TSVæ ¼å¼ï¼‰');
    // å®é™…éœ€å¯¹æ¥åå°ï¼Œä¸‹è½½è®¡ç®—ç»“æœæ–‡ä»¶
   }
   // ğŸ‘† æ–°å¢JSå‡½æ•°ç»“æŸ
  </script>
</body>

</html>